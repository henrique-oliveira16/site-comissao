<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cálculo de Comissão</title>
  <link rel="icon" type="image/png" href="https://www.php.net/images/logos/php-logo.svg">
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f5f5f5;
      color: #003366;
      margin: 0;
      padding: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      flex-direction: column;
    }

    .container {
      background: white;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0, 84, 166, 0.1);
      max-width: 500px;
      width: 100%;
      text-align: center;
      margin-bottom: 20px;
    }

    h1 {
      margin-bottom: 20px;
      color: #0054a6;
      font-size: 22px;
    }

    label {
      display: block;
      text-align: left;
      margin-bottom: 5px;
      font-weight: bold;
    }

    select, input[type="number"], button {
      width: 100%;
      padding: 12px;
      margin-bottom: 15px;
      border-radius: 6px;
      border: 1px solid #ccc;
      font-size: 16px;
    }

    button {
      background-color: #0054a6;
      color: white;
      border: none;
      cursor: pointer;
      font-weight: bold;
      text-transform: uppercase;
    }

    button:hover {
      background-color: #ff6b00;
    }

    .resultado {
      margin-top: 20px;
      text-align: left;
    }

    .resultado p {
      margin: 8px 0;
      font-size: 16px;
    }

    strong {
      color: #ff6b00;
    }

    footer {
      margin-top: 20px;
      text-align: center;
      color: #666;
    }

    .additional-input {
      display: none;
    }

    .show {
      display: block;
    }

    .checkbox-container {
      text-align: left;
      margin-bottom: 15px;
    }

    .checkbox-container input {
      width: auto;
      margin-right: 10px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Calcular Prêmio</h1>

    <label for="cargo">Tipo de vendedor:</label>
    <select id="cargo" required onchange="toggleAdditionalInputs()">
      <option value="" disabled selected>-- Escolha --</option>
      <option value="consultor1">Consultor I PAP</option>
      <option value="consultor2">Consultor II PAP</option>
    </select>

    <label for="receita">Valor da receita (R$):</label>
    <input type="number" id="receita" placeholder="0,00" min="0" step="0.01" required />

    <div id="meta-container" class="additional-input">
      <label for="meta">Atingimento da meta da equipe (%):</label>
      <input type="number" id="meta" placeholder="0" min="0" max="140" step="0.01" />
    </div>

    <div class="checkbox-container">
      <input type="checkbox" id="vendeu-plano" checked>
      <label for="vendeu-plano">Vendeu plano móvel?</label>
    </div>

    <button onclick="calcularComissao()">Calcular Premio</button>

    <div class="resultado" id="resultado"></div>
  </div>

  <script>
    function toggleAdditionalInputs() {
      const cargo = document.getElementById("cargo").value;
      const metaContainer = document.getElementById("meta-container");
      
      if (cargo === "consultor2") {
        metaContainer.classList.add("show");
      } else {
        metaContainer.classList.remove("show");
      }
    }

    function calcularComissao() {
      const cargo = document.getElementById("cargo").value;
      const receita = parseFloat(document.getElementById("receita").value);
      const meta = parseFloat(document.getElementById("meta").value) || 0;
      const vendeuPlano = document.getElementById("vendeu-plano").checked;
      
      let resultadoHTML = "";
      let comissaoTotal = 0;

      if (isNaN(receita) || receita <= 0 || !cargo) {
        document.getElementById("resultado").innerHTML = "<p><strong>Preencha todos os campos corretamente.</strong></p>";
        return;
      }

      // Cálculo base para ambos os consultores
      let fator = 0;
      
      if (receita >= 0.01 && receita <= 1000.00) fator = 0.15;
      else if (receita <= 1500.00) fator = 0.20;
      else if (receita <= 2000.00) fator = 0.25;
      else if (receita <= 2500.00) fator = 0.35;
      else if (receita <= 3000.00) fator = 0.45;
      else if (receita <= 3500.00) fator = 0.55;
      else if (receita <= 4000.00) fator = 0.65;
      else if (receita <= 4500.00) fator = 0.75;
      else if (receita <= 5000.00) fator = 1.00;
      else fator = 1.20;

      let comissaoVenda = receita * fator;
      let comissaoEquipe = 0;

      // Cálculo adicional para Consultor II
      if (cargo === "consultor2") {
        if (meta >= 85 && meta < 100) {
          comissaoEquipe = 250;
        } else if (meta >= 100) {
          comissaoEquipe = 450;
          
          // Adicional a cada 5% acima de 100%
          if (meta > 100) {
            const percentualAcima = Math.min(meta, 140) - 100;
            const adicional5 = Math.floor(percentualAcima / 5);
            comissaoEquipe += adicional5 * 100;
          }
        }
      }

      comissaoTotal = comissaoVenda + comissaoEquipe;

      // Aplicar desconto se não vendeu plano móvel
      if (!vendeuPlano) {
        comissaoTotal *= 0.8; // 20% de desconto
      }

      // Exibir resultados
      resultadoHTML = `
        <p><strong>Tipo de vendedor:</strong> ${cargo === "consultor1" ? "Consultor I PAP" : "Consultor II PAP"}</p>
        <p><strong>Valor da receita:</strong> R$ ${receita.toFixed(2).replace(".", ",")}</p>
        <p><strong>Fator aplicado:</strong> ${fator}</p>
        <p><strong>Comissão por venda:</strong> R$ ${comissaoVenda.toFixed(2).replace(".", ",")}</p>
      `;

      if (cargo === "consultor2") {
        resultadoHTML += `
          <p><strong>Atingimento da equipe:</strong> ${meta.toFixed(2)}%</p>
          <p><strong>Comissão da equipe:</strong> R$ ${comissaoEquipe.toFixed(2).replace(".", ",")}</p>
        `;
      }

      if (!vendeuPlano) {
        resultadoHTML += `<p><strong>Desconto (não vendeu plano móvel):</strong> 20%</p>`;
      }

      resultadoHTML += `<p><strong>Total a receber:</strong> R$ ${comissaoTotal.toFixed(2).replace(".", ",")}</p>`;

      document.getElementById("resultado").innerHTML = resultadoHTML;
    }
  </script>
  <footer>
    <p>Desenvolvido por Henrique Oliveira</p>
  </footer>
</body>
</html>